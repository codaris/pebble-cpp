<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pebble Foundation Classes: Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pebble Foundation Classes
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">C++ for Pebble</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_Turtorial.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Use the following steps to create a new C++ application from scratch. In this short tutorial we will create a simple application that tells the time and responds to clicks.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
1. Create a new project</h2>
<p>From the command line start a new project as usual:</p>
<div class="fragment"><div class="line">&gt; pebble new-project helloworld</div>
<div class="line">&gt; cd helloworld</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md14"></a>
2. Install the pebble-cpp package</h2>
<p>Then use the <code>pebble package install</code> command to install the <code>pebble-cpp</code> package. Execute a <code>pebble build</code> to initialize the package.</p>
<div class="fragment"><div class="line">&gt; pebble package install pebble-cpp</div>
<div class="line">&gt; pebble build</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15"></a>
3. Overwite the wscript file</h2>
<p>The <code>wscript</code> file located in the project root contains the instructions for the Pebble build system to compile the source files. This file needs to be modified to add commands to build C++ <code>*.cpp</code> files. <br  />
</p>
<p>You can copy an updated version of this file from the package folder <code>node_modules/pebble-cpp/dist/include/pebble-cpp/wscript</code>. Execute the following command in the root of your project to copy this file over the existing <code>wscript</code> file.</p>
<div class="fragment"><div class="line">&gt; cp node_modules/pebble-cpp/dist/include/pebble-cpp/wscript .</div>
</div><!-- fragment --><p>Alternatively you can view and download the updated <code>wscript</code> file from <a href="https://raw.githubusercontent.com/codaris/pebble-cpp/main/include/wscript">here</a>.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
4. Create a new C++ file</h2>
<p>We've now added the ability to build C++ files but we haven't changed the ability to build C files. In fact, you can freely mix C and C++ files. But for the purposes of this tutorial we will erase the default C file and create a new single-file C++ application:</p>
<p>Remove the existing source file: </p><div class="fragment"><div class="line">&gt; cd src/c</div>
<div class="line">&gt; rm helloworld.c</div>
</div><!-- fragment --><p>And now in your favorite text editor, create a new file called <code>helloworld.cpp</code> in the <code>src/c</code> folder. In that file add the following contents:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;pebble-cpp/pebble.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>Pebble;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>MainWindow : <span class="keyword">public</span> <a class="code" href="classPebble_1_1AppWindow.html">AppWindow</a>, <span class="keyword">public</span> <a class="code" href="classPebble_1_1TickTimer.html">TickTimer</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">void</span> OnLoad()</div>
<div class="line">    {</div>
<div class="line">        SetClickConfigProvider(CALLBACK(OnClickConfig));</div>
<div class="line">        textLayer.SetFrame(0, 55, 144, 50);</div>
<div class="line">        textLayer.SetBackgroundColor(GColorClear);</div>
<div class="line">        textLayer.SetTextColor(<a class="code" href="group__ColorDefinitions.html#ga03d3c53a6a31fe2d80def95b8c035e26">GColorBlack</a>);</div>
<div class="line">        textLayer.SetFont(FONT_KEY_BITHAM_42_BOLD);</div>
<div class="line">        textLayer.SetTextAlignment(<a class="code" href="group__TextDrawing.html#gga12cbd02b0d5668d7c9bd582077bf7f1da96946af7ae1aa2183ff953e0b053b79a">GTextAlignmentCenter</a>);</div>
<div class="line">        AddChild(textLayer);</div>
<div class="line">        TickTimerStart(<a class="code" href="group__TickTimerService.html#gga0423d00e0eb199de523a92031b5a1107af135dc6b67dce70c7b4b961605aa6970">MINUTE_UNIT</a>);</div>
<div class="line">        UpdateTime();</div>
<div class="line">    }        </div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> UpdateTime()</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="classPebble_1_1DateTime.html">DateTime</a> date = DateTime::Now();    </div>
<div class="line">        <span class="comment">// Use 24 hour format</span></div>
<div class="line">        date.Format(buffer, <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;00:00&quot;</span>), <span class="stringliteral">&quot;%H:%M&quot;</span>);</div>
<div class="line">        textLayer.SetText(buffer);</div>
<div class="line">    }    </div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> OnTick(<a class="code" href="structtm.html">tm</a> &amp;tick_time, <a class="code" href="group__TickTimerService.html#ga0423d00e0eb199de523a92031b5a1107">TimeUnits</a> units_changed)</div>
<div class="line">    {</div>
<div class="line">        UpdateTime();</div>
<div class="line">    }    </div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> OnClickConfig(<span class="keyword">const</span> <a class="code" href="classPebble_1_1ClickConfig.html">ClickConfig</a>&amp; clickConfig)</div>
<div class="line">    { </div>
<div class="line">        clickConfig.<a class="code" href="classPebble_1_1ClickConfig.html#ac0619a5fea6a4d7e94b7b6a34319aaf3">SingleClick</a>(<a class="code" href="group__Clicks.html#ggaa60e15d86cfe7033f28c7d066c85266ea98093cd31c917223780131cfafe91dec">BUTTON_ID_SELECT</a>, CALLBACK(OnSelectClick));</div>
<div class="line">        clickConfig.<a class="code" href="classPebble_1_1ClickConfig.html#ac0619a5fea6a4d7e94b7b6a34319aaf3">SingleClick</a>(<a class="code" href="group__Clicks.html#ggaa60e15d86cfe7033f28c7d066c85266eafb03cb7921a8bb7893cd8093a1a5e9cb">BUTTON_ID_UP</a>, CALLBACK(OnUpClick));</div>
<div class="line">        clickConfig.<a class="code" href="classPebble_1_1ClickConfig.html#ac0619a5fea6a4d7e94b7b6a34319aaf3">SingleClick</a>(<a class="code" href="group__Clicks.html#ggaa60e15d86cfe7033f28c7d066c85266ea65a919b8a0f4539acfb865eb2a2dd9d0">BUTTON_ID_DOWN</a>, CALLBACK(OnDownClick));</div>
<div class="line">    }    </div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> OnSelectClick(<span class="keyword">const</span> <a class="code" href="classPebble_1_1ClickRecognizer.html">ClickRecognizer</a>&amp; recognizer)</div>
<div class="line">    {</div>
<div class="line">        textLayer.SetText(<span class="stringliteral">&quot;Select&quot;</span>);</div>
<div class="line">    }    </div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> OnDownClick(<span class="keyword">const</span> <a class="code" href="classPebble_1_1ClickRecognizer.html">ClickRecognizer</a>&amp; recognizer)</div>
<div class="line">    {</div>
<div class="line">        textLayer.SetText(<span class="stringliteral">&quot;Down&quot;</span>);</div>
<div class="line">    }    </div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> OnUpClick(<span class="keyword">const</span> <a class="code" href="classPebble_1_1ClickRecognizer.html">ClickRecognizer</a>&amp; recognizer)</div>
<div class="line">    {</div>
<div class="line">        textLayer.SetText(<span class="stringliteral">&quot;Up&quot;</span>);</div>
<div class="line">    }    </div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">char</span> buffer[5];</div>
<div class="line">    <a class="code" href="classPebble_1_1TextLayer.html">Pebble::TextLayer</a> textLayer;   </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) </div>
<div class="line">{</div>
<div class="line">    MainWindow window;</div>
<div class="line">    window.StackPush(<span class="keyword">true</span>);</div>
<div class="line">    <a class="code" href="group__App.html#ga76a67379592a1844028767ee20332730">app_event_loop</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md17"></a>
Build and Run</h2>
<p>With all that code in the <code>helloworld.cpp</code> file we just need to build the project and run it in the emulator:</p>
<div class="fragment"><div class="line">&gt; pebble build</div>
<div class="line">&gt; pebble install --emulator basalt</div>
</div><!-- fragment --><p>If you have problems with the build, check the <a href="index.html#known-issues">Known Issues</a>.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Congradulations – You've done it.</h2>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aclassPebble_1_1TickTimer_html"><div class="ttname"><a href="classPebble_1_1TickTimer.html">Pebble::TickTimer</a></div><div class="ttdef"><b>Definition:</b> pebble_event_services.hpp:8</div></div>
<div class="ttc" id="aclassPebble_1_1ClickConfig_html"><div class="ttname"><a href="classPebble_1_1ClickConfig.html">Pebble::ClickConfig</a></div><div class="ttdef"><b>Definition:</b> pebble_clicks.hpp:90</div></div>
<div class="ttc" id="agroup__App_html_ga76a67379592a1844028767ee20332730"><div class="ttname"><a href="group__App.html#ga76a67379592a1844028767ee20332730">app_event_loop</a></div><div class="ttdeci">void app_event_loop(void)</div></div>
<div class="ttc" id="aclassPebble_1_1ClickRecognizer_html"><div class="ttname"><a href="classPebble_1_1ClickRecognizer.html">Pebble::ClickRecognizer</a></div><div class="ttdef"><b>Definition:</b> pebble_clicks.hpp:58</div></div>
<div class="ttc" id="agroup__TickTimerService_html_ga0423d00e0eb199de523a92031b5a1107"><div class="ttname"><a href="group__TickTimerService.html#ga0423d00e0eb199de523a92031b5a1107">TimeUnits</a></div><div class="ttdeci">TimeUnits</div><div class="ttdef"><b>Definition:</b> pebble.h:815</div></div>
<div class="ttc" id="aclassPebble_1_1TextLayer_html"><div class="ttname"><a href="classPebble_1_1TextLayer.html">Pebble::TextLayer</a></div><div class="ttdef"><b>Definition:</b> pebble_text_layer.hpp:5</div></div>
<div class="ttc" id="agroup__Clicks_html_ggaa60e15d86cfe7033f28c7d066c85266eafb03cb7921a8bb7893cd8093a1a5e9cb"><div class="ttname"><a href="group__Clicks.html#ggaa60e15d86cfe7033f28c7d066c85266eafb03cb7921a8bb7893cd8093a1a5e9cb">BUTTON_ID_UP</a></div><div class="ttdeci">@ BUTTON_ID_UP</div><div class="ttdoc">Up button.</div><div class="ttdef"><b>Definition:</b> pebble.h:164</div></div>
<div class="ttc" id="astructtm_html"><div class="ttname"><a href="structtm.html">tm</a></div><div class="ttdef"><b>Definition:</b> pebble.h:8311</div></div>
<div class="ttc" id="aclassPebble_1_1ClickConfig_html_ac0619a5fea6a4d7e94b7b6a34319aaf3"><div class="ttname"><a href="classPebble_1_1ClickConfig.html#ac0619a5fea6a4d7e94b7b6a34319aaf3">Pebble::ClickConfig::SingleClick</a></div><div class="ttdeci">void SingleClick(ButtonId button_id, ::ClickHandler handler) const</div><div class="ttdef"><b>Definition:</b> pebble_clicks.hpp:140</div></div>
<div class="ttc" id="agroup__ColorDefinitions_html_ga03d3c53a6a31fe2d80def95b8c035e26"><div class="ttname"><a href="group__ColorDefinitions.html#ga03d3c53a6a31fe2d80def95b8c035e26">GColorBlack</a></div><div class="ttdeci">#define GColorBlack</div><div class="ttdoc">GColorBlack</div><div class="ttdef"><b>Definition:</b> gcolor_definitions.h:113</div></div>
<div class="ttc" id="agroup__Clicks_html_ggaa60e15d86cfe7033f28c7d066c85266ea98093cd31c917223780131cfafe91dec"><div class="ttname"><a href="group__Clicks.html#ggaa60e15d86cfe7033f28c7d066c85266ea98093cd31c917223780131cfafe91dec">BUTTON_ID_SELECT</a></div><div class="ttdeci">@ BUTTON_ID_SELECT</div><div class="ttdoc">Select (middle) button.</div><div class="ttdef"><b>Definition:</b> pebble.h:166</div></div>
<div class="ttc" id="agroup__TickTimerService_html_gga0423d00e0eb199de523a92031b5a1107af135dc6b67dce70c7b4b961605aa6970"><div class="ttname"><a href="group__TickTimerService.html#gga0423d00e0eb199de523a92031b5a1107af135dc6b67dce70c7b4b961605aa6970">MINUTE_UNIT</a></div><div class="ttdeci">@ MINUTE_UNIT</div><div class="ttdoc">Flag to represent the &quot;minutes&quot; time unit.</div><div class="ttdef"><b>Definition:</b> pebble.h:819</div></div>
<div class="ttc" id="agroup__Clicks_html_ggaa60e15d86cfe7033f28c7d066c85266ea65a919b8a0f4539acfb865eb2a2dd9d0"><div class="ttname"><a href="group__Clicks.html#ggaa60e15d86cfe7033f28c7d066c85266ea65a919b8a0f4539acfb865eb2a2dd9d0">BUTTON_ID_DOWN</a></div><div class="ttdeci">@ BUTTON_ID_DOWN</div><div class="ttdoc">Down button.</div><div class="ttdef"><b>Definition:</b> pebble.h:168</div></div>
<div class="ttc" id="agroup__TextDrawing_html_gga12cbd02b0d5668d7c9bd582077bf7f1da96946af7ae1aa2183ff953e0b053b79a"><div class="ttname"><a href="group__TextDrawing.html#gga12cbd02b0d5668d7c9bd582077bf7f1da96946af7ae1aa2183ff953e0b053b79a">GTextAlignmentCenter</a></div><div class="ttdeci">@ GTextAlignmentCenter</div><div class="ttdoc">Aligns the text centered inside the drawing box.</div><div class="ttdef"><b>Definition:</b> pebble.h:4680</div></div>
<div class="ttc" id="aclassPebble_1_1AppWindow_html"><div class="ttname"><a href="classPebble_1_1AppWindow.html">Pebble::AppWindow</a></div><div class="ttdoc">Base class for application windows.</div><div class="ttdef"><b>Definition:</b> pebble_window.hpp:94</div></div>
<div class="ttc" id="aclassPebble_1_1DateTime_html"><div class="ttname"><a href="classPebble_1_1DateTime.html">Pebble::DateTime</a></div><div class="ttdef"><b>Definition:</b> pebble_time.hpp:40</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
